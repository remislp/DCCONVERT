From SCSIM.FOR

	ans='Y'
	call DCASK('Write results to experiment (SCAN.SCN) file',ans,ans)
	if(UC(ans).eq.'N') goto 99
	print 274,kt
274	format(' Number of usable intervals= ',i6)
c	iscan=-3001	!data from SCSIM
	iscan=-103	!data from SCSIM written in new scan.dat format
c Call DSKWRIT1 with debug
	calfac2=1.0		!for DSKWRT only
	ffilt=-1.
	rms=0.0
	nint=kt
	if(.not.setres) then
	   treso=0.0
	   tresg=0.0
	endif
	call DSKWRIT2(tint,iampl,iprops,nint,ffilt,rms,avamp,
     & calfac2,cdate,iscan,treso,tresg,vkin,ndim,
     & cjump,njump,tjmax)

	 iscanver = -103         integer32
	 ioffset = 768           integer32
	 nint                    integer32
	 title                   character*70
	 expdate                 character*11
	 tapeID = 'Data simulated in SCSIM '      character*24
	 ipatch = 1              integer32
	 Emem = 0.0              float
	 cjump = 0               integer32
	 avamp = 1.0             float
	 rms = 0.0               float
	 ffilt = -1.0            float
	 calfac2 = 1.0           float
	 treso = 0.0             float
	 tresg = 0.0             float
	 
c Write the header for simulated steady state
	   write(15,rec=1) iscanver,ioffset,nint,title,expdate,
     &    tapeID,ipatch,Emem,cjump,avamp,rms,ffilt,calfac2,
     &    treso,tresg
c Write the data
	   write(15,rec=ioffset)
     &    (tint(i),i=1,nint),(iampl(i),i=1,nint),(iprops(i),i=1,nint)
	 
	 
	 c Data=
c real*4 tint(1...nint) 	   4nint bytes
c integer*2 iampl(1..nint)   2*nint bytes
c integer*1 iprops(1..nint)  nint  bytes

c Total storage needed=7*nint bytes
c +header=ioffset=256 bytes

As read in EKDIST
		   read(18,rec=irec)expnum,ifile1,kt,iscan,expdate,title,
     &          tapeID,ipatch,Emem,temp,ffilt,avamp,rms,calfac2,ioffset,
     &	    treso,tresg

	 		else if(simulat) then
c    read simulated data in new scan.scn format -dep on whether cjump or not
		 read(18,rec=1) iscan,ioffset,nint,title,expdate,
     &	  tapeID,ipatch,Emem,cjump,avamp,rms,ffilt,calfac2,
     &	  treso,tresg

	 
	 
	 
	 
	 #############################     EVL     file     ##################################
	 else if(idatyp.eq.5) then	!read header for .EVL file
	   call READ_EVL(n,kfile,pfile,nset,nfile,nval,irecs,
     &	srate,calfacs2,ffilt,nintt,ntot,nmax)
	   iscan=301	!signals .evl file (but not in file of course)
c	   goto 8
	endif